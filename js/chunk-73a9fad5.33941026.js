(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73a9fad5"],{"0f98":function(t,e,a){},"148d":function(t,e,a){},"19e4":function(t,e,a){},"201e":function(t,e,a){},"212e":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-maker"},[a("deposit-modal",{ref:"deposit",attrs:{values:t.activeValues,"calc-collat-ratio-dai-chg":t.calcCollatRatioDaiChg,"calc-collat-ratio-eth-chg":t.calcCollatRatioEthChg,"calc-liquidation-price-eth-chg":t.calcLiquidationPriceEthChg,"calc-liquidation-price-dai-chg":t.calcLiquidationPriceDaiChg,"tokens-with-balance":t.tokensWithBalance},on:{lockEth:t.lockEth}}),a("generate-modal",{ref:"generate",attrs:{values:t.activeValues,"calc-collat-ratio-dai-chg":t.calcCollatRatioDaiChg,"calc-collat-ratio-eth-chg":t.calcCollatRatioEthChg,"calc-liquidation-price-eth-chg":t.calcLiquidationPriceEthChg,"calc-liquidation-price-dai-chg":t.calcLiquidationPriceDaiChg,"tokens-with-balance":t.tokensWithBalance},on:{drawDai:t.drawDai}}),a("withdraw-modal",{ref:"withdraw",attrs:{values:t.activeValues,"calc-collat-ratio-dai-chg":t.calcCollatRatioDaiChg,"calc-collat-ratio-eth-chg":t.calcCollatRatioEthChg,"calc-liquidation-price-eth-chg":t.calcLiquidationPriceEthChg,"calc-liquidation-price-dai-chg":t.calcLiquidationPriceDaiChg,"tokens-with-balance":t.tokensWithBalance},on:{approveDai:t.approveDai,approveMkr:t.approveMkr,freeEth:t.freeEth}}),a("payback-modal",{ref:"payback",attrs:{values:t.activeValues,"calc-collat-ratio-dai-chg":t.calcCollatRatioDaiChg,"calc-collat-ratio-eth-chg":t.calcCollatRatioEthChg,"calc-liquidation-price-eth-chg":t.calcLiquidationPriceEthChg,"calc-liquidation-price-dai-chg":t.calcLiquidationPriceDaiChg,"tokens-with-balance":t.tokensWithBalance},on:{approveDai:t.approveDai,approveMkr:t.approveMkr,wipeDai:t.wipeDai}}),a("close-cdp-modal",{ref:"closeCdp",attrs:{values:t.activeValues,"calc-collat-ratio-dai-chg":t.calcCollatRatioDaiChg,"calc-collat-ratio-eth-chg":t.calcCollatRatioEthChg,"calc-liquidation-price-eth-chg":t.calcLiquidationPriceEthChg,"calc-liquidation-price-dai-chg":t.calcLiquidationPriceDaiChg,"tokens-with-balance":t.tokensWithBalance},on:{approveDai:t.approveDai,approveMkr:t.approveMkr,closeCdp:t.closeCdp}}),a("move-cdp-modal",{ref:"moveCdp",attrs:{values:t.activeValues,"calc-collat-ratio-dai-chg":t.calcCollatRatioDaiChg,"calc-collat-ratio-eth-chg":t.calcCollatRatioEthChg,"calc-liquidation-price-eth-chg":t.calcLiquidationPriceEthChg,"calc-liquidation-price-dai-chg":t.calcLiquidationPriceDaiChg,"dest-address-has-proxy":t.destAddressHasProxy,"dest-address-proxy":t.destAddressProxy,"tokens-with-balance":t.tokensWithBalance},on:{moveCdp:t.moveCdp,checkForProxy:t.checkIfDestAddressHasProxy}}),a("back-button",{attrs:{path:"/interface/dapps/"}},[a("div",{staticClass:"back-bar-container"},[t.showMoveOrClose?a("div",{staticClass:"header-buttons-container"},[a("div",{staticClass:"inner-container"},[a("button",{staticClass:"move-btn",on:{click:t.showMove}},[a("h4",[t._v(t._s(t.$t("dappsMaker.move-title")))])]),!t.hasProxy&&!t.onCreate||t.showCdpMigrateButtons?t._e():a("div",[a("button",{staticClass:"close-btn",on:{click:t.showClose}},[a("h4",[t._v(t._s(t.$t("dappsMaker.close-title")))])])])])]):t._e()])]),t.makerActive?a("div",{staticClass:"buttons-container"},[t.showCreateProxy?a("div",[a("div",{staticClass:"dapps-button",on:{click:t.buildProxy}},[a("h4",[t._v(t._s(t.$t("dappsMaker.create-proxy")))])])]):t._e(),t.showCreateProxy?a("div",{staticClass:"proxy-container"},[t._v(" "+t._s(t.$t("dappsMaker.proxy-instructions"))+" ")]):t._e(),t.showCdpMigrateButtons?a("div",t._l(t.cdpsWithoutProxy,(function(e,i){return a("div",{key:i+e},[a("div",{staticClass:"dapps-button"},[a("div",{on:{click:function(a){return t.migrateCdpExternal(e)}}},[a("h4",[t._v(" "+t._s(t.$t("dappsMaker.migrate-cdp",{value:e}))+" ")])])])])})),0):t._e(),t.showCdpMigrateButtons?a("div",{staticClass:"proxy-container"},[t._v(" "+t._s(t.$t("dappsMaker.migrate-instructions"))+" ")]):t._e()]):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:t.makerActive,expression:"makerActive"}],staticClass:"buttons-container"},[t.showCreateProxy&&t.cdpsWithoutProxy.length>1?a("div",t._l(t.cdpsWithoutProxy,(function(e,i){return a("div",{key:i+e},[a("div",{class:["dapps-button",t.activeValues.cdpId===e?"active":""]},[a("div",{on:{click:function(a){return t.openMigrate(e)}}},[a("h4",[t._v(t._s(t.$t("dappsMaker.cdp"))+" #"+t._s(e))])])])])})),0):t._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.makerActive&&t.listCdps,expression:"makerActive && listCdps"}],staticClass:"buttons-container"},t._l(t.cdps,(function(e,i){return a("div",{key:i+e},[a("div",{class:["dapps-button",t.activeValues.cdpId===e?"active":""]},[a("div",{on:{click:function(a){return t.openManage(e)}}},[a("h4",[t._v(t._s(t.$t("dappsMaker.cdp"))+" #"+t._s(e))])])])])})),0),a("router-view",{attrs:{"build-empty":t.buildEmpty,"maker-active":t.makerActive,"eth-price":t.ethPrice,"peth-price":t.pethPrice,"peth-min":t.pethMin,"weth-to-peth-ratio":t.wethToPethRatio,"liquidation-penalty":t.liquidationPenalty,"stability-fee":t.stabilityFee,"liquidation-ratio":t.liquidationRatio,"price-service":t.priceService,"cdp-service":t.cdpService,"proxy-service":t.proxyService,cdps:t.cdps,"cdp-details-loaded":t.cdpDetailsLoaded,"tokens-with-balance":t.tokensWithBalance,"migration-in-progress":t.migrationInProgress,"open-close-modal":t.openCloseModal,"open-move-modal":t.openMoveModal,"values-updated":t.valuesUpdated,values:t.activeValues,"get-cdp":t.getCdp,"has-cdp":t.hasCdp,"loading-message1":t.$t("dappsMaker.initial-loading-one"),"loading-message2":t.$t("dappsMaker.initial-loading-two")},on:{activeCdpId:t.setupCdpManage,cdpOpened:t.addCdp,cdpClosed:t.removeCdp,modalHidden:t.modalHidden,managerUpdate:t.doUpdate,showWithdraw:t.showWithdraw,showPayback:t.showPayback,showGenerate:t.showGenerate,showDeposit:t.showDeposit,migrateCdp:t.migrateCdpExternal}})],1)},n=[],r=(a("a4d3"),a("99af"),a("4de4"),a("caad"),a("b0c0"),a("e439"),a("dbb4"),a("b64b"),a("d3b7"),a("25f0"),a("2532"),a("159b"),a("ddb0"),a("d0ff")),s=(a("96cf"),a("fc11")),o=a("2f62"),c=a("572c"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-container"},[a("b-modal",{ref:"modal",staticClass:"bootstrap-modal nopadding",attrs:{title:t.$t("dappsMaker.close-title"),centered:"",static:"",lazy:"","hide-footer":""}},[a("div",{staticClass:"contents"},[t.enoughMkr?t._e():a("div",{staticClass:"message-container"},[t._v(" "+t._s(t.$t("dappsMaker.not-enough-mkr-close"))+" ")]),t.enoughDai?t._e():a("div",{staticClass:"message-container"},[t._v(" "+t._s(t.$t("dappsMaker.not-enough-dai-close"))+" ")]),a("p",{staticClass:"top-text"},[t._v(" "+t._s(t.$t("dappsMaker.closing-notice"))+" ")]),a("div",{staticClass:"value-table-container"},[a("div",{staticClass:"value-table mkr-balance"},[a("div",{staticClass:"value-block"},[a("p",[a("b",[t._v(t._s(t.$t("dappsMaker.mkr-balance")))])]),a("p",[a("b",[t._v(t._s(t.mkrBalance)+" "+t._s(t.$t("dappsMaker.mkr")))])])]),a("p",{directives:[{name:"show",rawName:"v-show",value:!t.enoughMkr,expression:"!enoughMkr"}],staticClass:"get-mkr",on:{click:function(e){return t.getMkr()}}},[t._v(" "+t._s(t.$t("dappsMaker.get-mkr"))+" ")])]),a("div",{staticClass:"value-table mkr-balance"},[a("div",{staticClass:"value-block"},[a("p",[a("b",[t._v(t._s(t.$t("dappsMaker.dai-balance")))])]),a("p",[a("b",[t._v(t._s(t.daiBalance)+" "+t._s(t.$t("dappsMaker.dai")))])])]),a("p",{directives:[{name:"show",rawName:"v-show",value:!t.enoughDai,expression:"!enoughDai"}],staticClass:"get-mkr",on:{click:function(e){return t.getDai()}}},[t._v(" "+t._s(t.$t("dappsMaker.get-dai"))+" ")])]),a("div",{staticClass:"value-table other-values"},[a("div",{staticClass:"value-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.outstanding-dai")))]),a("p",[a("b",[t._v(t._s(t.values.debtValue)+" "+t._s(t.$t("dappsMaker.dai")))])])]),a("div",{staticClass:"value-block"},[a("p",[t._v(" "+t._s(t.$t("dappsMaker.stability-fee-in-mkr",{value:t.displayFixedValue(t.displayPercentValue(t.values.stabilityFee))}))+" ")]),a("p",[a("b",[t._v(t._s(t.getfeeOwed)+" "+t._s(t.$t("dappsMaker.mkr")))])])])])]),a("div",{staticClass:"buttons"},[t.needsDaiApprove?a("div",[a("standard-button",{attrs:{options:t.approveDaiButton,"click-function":t.approveDai}})],1):t._e(),t.needsMkrApprove?a("div",[a("standard-button",{attrs:{options:t.approveMkrButton,"click-function":t.approveMkr}})],1):t._e()]),a("div",{staticClass:"buttons"},[a("standard-button",{attrs:{options:t.cancelButton,"click-function":t.closeModal}}),a("standard-button",{attrs:{options:t.closeButton,"button-disabled":!t.canClose,"click-function":t.closeCdp}})],1),a("help-center-button")],1)])],1)},l=[],d=(a("7db0"),a("b680"),a("a8f0")),h=a("76ed"),p=a("901e"),m=a.n(p);function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(a,!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var g=function(t){return new m.a(t)},y={components:{"help-center-button":h["a"],"standard-button":d["a"]},props:{tokensWithBalance:{type:Array,default:function(){return[]}},action:{type:String,default:""},values:{type:Object,default:function(){return{maxPethDraw:"",maxEthDraw:"",maxUsdDraw:"",ethCollateral:"",pethCollateral:"",usdCollateral:"",debtValue:"",maxDai:"",collateralRatio:"",cdpId:""}}},makerManager:{type:Object,default:function(){return{}}}},data:function(){return{amount:0,amountEth:0,amountDai:0,govFee:0,closable:!1,modalDetailInformation:!1,textValues:{},mkrToken:{},daiToken:{},approveMkrButton:{title:"Approve Maker",buttonStyle:"green-border",fullWidth:!0,noMinWidth:!0},approveDaiButton:{title:"Approve Dai",buttonStyle:"green-border",fullWidth:!0,noMinWidth:!0},cancelButton:{title:"Cancel",buttonStyle:"green-border",fullWidth:!0,noMinWidth:!0},closeButton:{title:"Close",buttonStyle:"green",fullWidth:!0,noMinWidth:!0},suppliedFrom:{symbol:"ETH",name:"Ethereum"},suppliedTo:{symbol:"MKR",name:"Maker"},suppliedToAmount:0,destAddress:""}},computed:f({},Object(o["b"])(["account","gasPrice","web3","network","ens"]),{getfeeOwed:function(){var t=this.values.governanceFeeOwed;return this.displayFixedValue(t,8)},newCollateralRatio:function(){return this.values?this.values.collatRatio:0},newCollateralRatioSafe:function(){return!this.values||g(this.values.collatRatio).gte(2)},newLiquidationPrice:function(){return this.values?this.values.liquidationPrice:0},mkrBalance:function(){return this.mkrToken?this.mkrToken.balance:0},daiBalance:function(){return this.daiToken?this.daiToken.balance:0},enoughMkr:function(){var t=this.values.governanceFeeOwed;return!!t&&g(this.mkrBalance).minus(t).gte(0)},enoughDai:function(){if(this.values.zeroDebt)return!0;var t=this.values.debtValue;return!!t&&g(this.daiBalance).minus(t).gte(0)},needsDaiApprove:function(){return!(!g(this.values.proxyAllowanceDai).gt(0)||!g(this.values.proxyAllowanceDai).lte(this.values.debtValue))||g(this.values.proxyAllowanceDai).eq(0)},needsMkrApprove:function(){return!(!g(this.values.proxyAllowanceMkr).gt(0)||!g(this.values.proxyAllowanceMkr).lt(this.values.governanceFeeOwed))||g(this.values.proxyAllowanceMkr).eq(0)},canClose:function(){return this.enoughMkr&&this.enoughDai&&!this.needsDaiApprove&&!this.needsMkrApprove}}),watch:{tokensWithBalance:function(){this.getBalances()}},mounted:function(){var t=this;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:this.destAddress=this.account.address,this.getBalances(),this.$refs.modal.$on("shown",(function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:t.getBalances();case 1:case"end":return e.stop()}}))}));case 3:case"end":return e.stop()}}),null,this)},methods:{closeModal:function(){this.$refs.modal.hide()},delayCloseModal:function(){var t=this;setTimeout((function(){t.closeModal()}),200)},closeCdp:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:this.delayCloseModal(),this.$emit("closeCdp");case 2:case"end":return t.stop()}}),null,this)},displayPercentValue:function(t){return m.a.isBigNumber(t)||(t=new m.a(t)),t.times(100).toString()},displayFixedValue:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return m.a.isBigNumber(t)||(t=new m.a(t)),t.toFixed(e,m.a.ROUND_DOWN).toString()},maxDai:function(){this.amount=this.values.maxDai},currentDai:function(){this.amount=this.values.debtValue},getBalances:function(){this.mkrToken=this.tokensWithBalance.find((function(t){return"MKR"===t.symbol})),this.daiToken=this.tokensWithBalance.find((function(t){return"DAI"===t.symbol}))},getMkr:function(){var t=this,e=this.getfeeOwed;g(this.mkrBalance).lt(e)&&(this.suppliedToAmount=g(e).minus(g(this.mkrBalance)).plus(g(e).times(.01)).toNumber(),g(this.suppliedToAmount).lt(1e-6)&&(this.suppliedToAmount=1e-6),this.suppliedFrom={symbol:"ETH",name:"Ethereum"},this.suppliedTo={symbol:"MKR",name:"Maker"},this.$nextTick((function(){t.$refs.swapWidget.$refs.modal.show()})))},getDai:function(){var t=this.values.debtValue;g(this.daiBalance).lt(t)&&(this.suppliedToAmount=g(t).minus(g(this.daiBalance)).toNumber(),g(this.suppliedToAmount).lt(1e-6)&&(this.suppliedToAmount=1e-6),this.suppliedFrom={symbol:"ETH",name:"Ethereum"},this.suppliedTo={symbol:"DAI",name:"Dai"},this.$eventHub.$emit("showSwapWidgetTo",this.account.address,this.suppliedFrom,this.suppliedTo,this.suppliedToAmount))},approveDai:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:this.$emit("approveDai");case 1:case"end":return t.stop()}}),null,this)},approveMkr:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:this.$emit("approveMkr");case 1:case"end":return t.stop()}}),null,this)}}},b=y,x=(a("d07c"),a("2877")),k=Object(x["a"])(b,u,l,!1,null,"8e968400",null),w=k.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-container"},[a("b-modal",{ref:"modal",staticClass:"bootstrap-modal nopadding",attrs:{title:t.$t("dappsMaker.move-title"),"hide-footer":"",centered:"",static:"",lazy:""}},[a("div",{staticClass:"modal-content"},[a("p",{staticClass:"top-text"},[t._v(" "+t._s(t.$t("dappsMaker.move-notice"))+" ")]),a("check-box",{on:{changeStatus:t.checkBoxClicked},scopedSlots:t._u([{key:"terms",fn:function(){return[a("p",{staticClass:"checkbox-label"},[t._v(" "+t._s(t.$t("dappsMaker.understand-and-agree"))+" ")])]},proxy:!0}])}),a("div",{staticClass:"input-container"},[a("label",[t._v(t._s(t.$t("dappsMaker.move-question")))]),a("div",{staticClass:"input-box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}})])]),a("div",[t.destAddressHasProxy?a("div",[a("p",[t._v(" "+t._s(t.$t("dappsMaker.proxy-address",{value:t.destAddressProxy}))+" ")]),t._v(" "+t._s(t.$t("dappsMaker.move-with-proxy"))+" ")]):t._e(),t.destAddressHasProxy?t._e():a("div",[t._v(" "+t._s(t.$t("dappsMaker.move-without-proxy"))+" ")])]),a("div",{staticClass:"buttons"},[a("standard-button",{attrs:{options:t.cancelButton,"click-function":t.closeModal}}),a("standard-button",{attrs:{options:t.submitButton,"button-disabled":!t.btnActive,"click-function":t.moveCdp}})],1),a("help-center-button")],1)])],1)},P=[],_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"check-box"},[a("label",{staticClass:"check-box-container"},[a("input",{attrs:{type:"checkbox"},on:{click:t.checkBoxClicked}}),a("span",{staticClass:"checkmark"}),t._t("terms")],2)])},R=[],D={data:function(){return{checkboxChecked:!1}},methods:{checkBoxClicked:function(){this.checkboxChecked=!this.checkboxChecked,this.$emit("changeStatus",this.checkboxChecked)}}},M=D,O=(a("7c0e"),Object(x["a"])(M,_,R,!1,null,"74d90e30",null)),A=O.exports,$=a("ce96");function S(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function B(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?S(a,!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):S(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var E={components:{"check-box":A,"help-center-button":h["a"],"standard-button":d["a"]},props:{tokensWithBalance:{type:Array,default:function(){return[]}},action:{type:String,default:""},values:{type:Object,default:function(){return{maxPethDraw:"",maxEthDraw:"",maxUsdDraw:"",ethCollateral:"",pethCollateral:"",usdCollateral:"",debtValue:"",maxDai:"",collateralRatio:"",cdpId:""}}},destAddressHasProxy:{type:Boolean,default:!1},destAddressProxy:{type:String,default:""}},data:function(){return{address:"",amountEth:0,amountDai:0,govFee:0,modalDetailInformation:!1,checkBoxChecked:!1,textValues:{},mkrToken:{},cancelButton:{title:"Cancel",buttonStyle:"green-border",noMinWidth:!0},submitButton:{title:"Submit",buttonStyle:"green",noMinWidth:!0,fullWidth:!0}}},computed:B({},Object(o["b"])(["account","gasPrice","web3","network","ens"]),{btnActive:function(){return $["d"].isValidETHAddress(this.address)&&this.checkBoxChecked}}),watch:{address:function(t){$["d"].isValidETHAddress(t)&&this.$emit("checkForProxy",t)}},mounted:function(){var t=this;this.$refs.modal.$on("shown",(function(){t.address=""}))},methods:{closeCdp:function(){this.activeCdp.closeCdp()},checkBoxClicked:function(){this.checkBoxChecked=!this.checkBoxChecked},displayPercentValue:function(t){return m.a.isBigNumber(t)||(t=new m.a(t)),t.times(100).toString()},displayFixedValue:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return m.a.isBigNumber(t)||(t=new m.a(t)),t.toFixed(e,m.a.ROUND_DOWN).toString()},moveCdp:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:$["d"].isValidETHAddress(this.address)&&(this.$emit("moveCdp",this.address),this.closeModal());case 1:case"end":return t.stop()}}),null,this)},closeModal:function(){this.$refs.modal.hide()}}},j=E,V=(a("7d81"),Object(x["a"])(j,C,P,!1,null,"85b1a0be",null)),q=V.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-container"},[a("b-modal",{ref:"modal",staticClass:"bootstrap-modal nopadding",attrs:{title:t.$t("dappsMaker.generate-title"),centered:"","hide-footer":"",static:"",lazy:""}},[a("div",{staticClass:"contents"},[a("div",{staticClass:"inputs"},[a("div",{staticClass:"interface__block-title"},[t._v(" "+t._s(t.$t("dappsMaker.generate-question"))+" ")]),a("div",{staticClass:"top-buttons"},[a("p",{staticClass:"total"},[a("span",[t._v(t._s(t.$t("dappsMaker.total")))]),t._v(" "+t._s(t.newTotal)+" "+t._s(t.$t("dappsMaker.dai"))+" ")]),a("p",{staticClass:"max",on:{click:t.maxDai}},[t._v(" "+t._s(t.$t("dappsMaker.max-balance"))+" ")])]),a("div",{class:["input-box",t.allOk?"":"danger"]},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),a("p",{staticClass:"input-unit"},[t._v(t._s(t.$t("dappsMaker.dai")))])]),a("div",{staticClass:"sub-text"},[t.canGenerateDaiAmount?t._e():a("p",{staticClass:"above-max"},[t._v(" "+t._s(t.$t("dappsMaker.above-max-dai"))+" ")]),a("p",[t._v(" "+t._s(t.$t("dappsMaker.collateral-ratio-val",{value:t.newCollateralRatio}))+" ")])])]),a("expanding-option",{attrs:{title:"Details"}},[a("div",{staticClass:"detail-container"},[a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.max-generate-available")))]),a("p",[a("b",[t._v(" "+t._s(t.values.maxDai?t.displayFixedValue(t.values.maxDai):0)+" ")]),t._v(" "+t._s(t.$t("dappsMaker.dai"))+" ")])]),a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.projected-liquidation")))]),a("p",[a("b",[t._v(t._s(t.displayFixedValue(t.newLiquidationPrice,2)))]),t._v(" "+t._s(t.fiatCurrency)+" ")])]),a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.projected-collat-ratio")))]),a("p",[a("b",[t._v(t._s(t.newCollateralRatio)+"%")])])])])]),!t.newCollateralRatioSafe&&t.notZero(t.amount)?a("div",{staticClass:"warning-confirmation"},[a("div",{staticClass:"grid-block"},[a("div",{staticClass:"sign"},[t._v("⚠️")]),a("div",{staticClass:"text-content"},[a("p",{staticClass:"title"},[t._v(t._s(t.$t("dappsMaker.caution")))]),a("p",{staticClass:"warning-details"},[t._v(" "+t._s(t.$t("dappsMaker.liquidation-risk",{value:t.newCollateralRatio}))+" ")]),a("check-box",{on:{changeStatus:t.checkBoxClicked},scopedSlots:t._u([{key:"terms",fn:function(){return[a("p",{staticClass:"checkbox-label"},[t._v(" "+t._s(t.$t("dappsMaker.understand-and-agree"))+" ")])]},proxy:!0}],null,!1,196307094)})],1)])]):t._e(),a("div",{staticClass:"buttons"},[a("standard-button",{attrs:{options:t.cancelButton,"click-function":t.closeModal}}),a("standard-button",{attrs:{options:t.generateButton,"button-disabled":!t.canProceed,"click-function":t.submitBtn}})],1),a("help-center-button")],1)])],1)},W=[],F=a("70c1"),I=a.n(F),U=a("1768"),N=a("c16c");function L(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function H(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?L(a,!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):L(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var z=function(t){return new m.a(t)},G={components:{"help-center-button":h["a"],"check-box":A,"expanding-option":U["a"],"standard-button":d["a"]},props:{tokensWithBalance:{type:Array,default:function(){return[]}},action:{type:String,default:""},values:{type:Object,default:function(){return{maxPethDraw:"",maxEthDraw:"",maxUsdDraw:"",ethCollateral:"",pethCollateral:"",usdCollateral:"",debtValue:"",maxDai:"",collateralRatio:"",cdpId:""}}},calcCollatRatioEthChg:{type:Function,default:function(){}},calcLiquidationPriceEthChg:{type:Function,default:function(){}},calcCollatRatioDaiChg:{type:Function,default:function(){}},calcLiquidationPriceDaiChg:{type:Function,default:function(){}}},data:function(){return{amount:0,amountEth:0,amountDai:0,riskyBypass:!1,modalDetailInformation:!1,textValues:{},fiatCurrency:"USD",digitalCurrency:"ETH",cancelButton:{title:"Cancel",buttonStyle:"green-border",noMinWidth:!0},generateButton:{title:"Generate",buttonStyle:"green",noMinWidth:!0}}},computed:H({},Object(o["b"])(["account","gasPrice","web3","network","ens"]),{amountPresent:function(){return(this.amount||""!==this.amount)&&!z(this.amount).lte(0)},canCompute:function(){return this.values&&this.amountPresent},allOk:function(){return!this.amountPresent||this.newCollateralRatioSafe&&this.canGenerateDaiAmount},showWarning:function(){return!this.newCollateralRatioInvalid&&this.canGenerateDaiAmount&&this.riskyBypass},newTotal:function(){return z(this.values.debtValue).plus(this.amount)},hasEnoughEth:function(){if(this.canCompute){var t=I.a.fromWei(this.account.balance,"ether");return z(this.amount).lte(z(t))}return!0},canGenerateDaiAmount:function(){return!(this.canCompute&&!z(this.amount).isNaN())||z(this.amount).lte(z(this.values.maxDai))},canProceed:function(){return!!this.canCompute&&(!z(this.amount).lte(0)&&(this.newCollateralRatioSafe&&this.canGenerateDaiAmount||!this.newCollateralRatioInvalid&&this.canGenerateDaiAmount&&this.riskyBypass))},calcCollateralRatio:function(){return this.canCompute?this.calcCollatRatioDaiChg(z(this.values.debtValue).plus(this.amount)):this.values?this.values.collateralRatio:0},newCollateralRatio:function(){return this.canCompute||this.values?this.displayFixedPercent(this.calcCollateralRatio):"--"},newCollateralRatioSafe:function(){return!this.canCompute||this.calcCollateralRatio.gte(2)},newCollateralRatioInvalid:function(){return!this.canCompute||this.calcCollateralRatio.lte(1.5)},newLiquidationPrice:function(){return this.canCompute?this.calcLiquidationPriceDaiChg(z(this.values.debtValue).plus(this.amount)):this.values?this.values.liquidationPrice:0}}),methods:{submitBtn:function(){this.canProceed&&this.drawDai()},checkBoxClicked:function(t){this.riskyBypass=t},displayPercentValue:N["e"],displayFixedValue:N["d"],displayFixedPercent:N["c"],notZero:function(t){return z(t).gt(0)},maxDai:function(){this.amount=z(this.values.maxDai).minus(z(this.values.maxDai).times(.01)),this.$forceUpdate()},currentDai:function(){this.amount=this.values.debtValue},drawDai:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:z(this.amount).gte(0)&&(this.delayCloseModal(),this.newCollateralRatioSafe?this.$emit("drawDai",[this.amount,null]):this.$emit("drawDai",[this.amount,this.riskyBypass]));case 1:case"end":return t.stop()}}),null,this)},closeModal:function(){this.$refs.modal.hide()},delayCloseModal:function(){var t=this;setTimeout((function(){t.closeModal()}),200)}}},K=G,Q=(a("df86"),Object(x["a"])(K,T,W,!1,null,"658756ce",null)),Z=Q.exports,J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-container"},[a("b-modal",{ref:"modal",staticClass:"bootstrap-modal nopadding",attrs:{title:t.$t("dappsMaker.deposit-title"),centered:"","hide-footer":"",static:"",lazy:""}},[a("div",{staticClass:"modal-content-container"},[a("div",{staticClass:"inputs-container"},[a("div",{staticClass:"input-container"},[a("div",{staticClass:"interface__block-title"},[t._v(" "+t._s(t.$t("dappsMaker.deposit-question"))+" ")]),a("div",{class:["input-box",t.hasEnoughEth?"":"danger"]},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),a("span",{staticClass:"input-unit"},[t._v(t._s(t.digitalCurrency))])]),a("div",{staticClass:"sub-text"},[t.hasEnoughEth?t._e():a("p",{staticClass:"above-max"},[t._v(" "+t._s(t.$t("dappsMaker.notEnoughEth"))+" ")]),a("div",{staticClass:"peth"},[a("p",[t._v(" "+t._s(t.values.toPeth?t.displayFixedValue(t.values.toPeth(t.amount),5,!1):0)+" "+t._s(t.$t("common.currency.peth"))+" ")]),a("popover",{attrs:{popcontent:t.$t("dappsMaker.peth-popover")}})],1)])])]),a("div",{staticClass:"detail-info"},[a("div",{staticClass:"info"},[a("h4",[t._v(t._s(t.$t("dappsMaker.detail-info")))]),a("div",{staticClass:"sliding-switch-white"},[a("label",{staticClass:"switch"},[a("input",{attrs:{type:"checkbox"},on:{click:function(e){t.modalDetailInformation=!t.modalDetailInformation}}}),a("span",{staticClass:"slider round"})])])]),a("div",{staticClass:"expended-info",class:t.modalDetailInformation&&"expended-info-open"},[a("div",{staticClass:"padding-container"},[a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.currently-deposited")))]),a("p",[a("b",[t._v(t._s(t.displayFixedValue(t.values.ethCollateral,5)))]),t._v(" "+t._s(t.digitalCurrency)+" ")])]),a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.projected-liquidation")))]),a("p",[a("b",[t._v(t._s(t.displayFixedValue(t.newLiquidationPrice,2)))]),t._v(" "+t._s(t.fiatCurrency)+" ")])]),a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.projected-collat-ratio")))]),a("p",[a("b",[t._v(t._s(t.displayFixedValue(t.displayPercentValue(t.newCollateralRatio),3))+"%")])])])])])]),a("div",{staticClass:"buttons"},[a("standard-button",{attrs:{options:t.cancelButton,"click-function":t.closeModal}}),a("standard-button",{attrs:{options:t.submitButton,"button-disabled":!t.canProceed,"click-function":t.submitBtn}})],1),a("help-center-button")],1)])],1)},X=[];function Y(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function tt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Y(a,!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Y(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var et=function(t){return new m.a(t)},at={components:{"help-center-button":h["a"],"standard-button":d["a"]},props:{tokensWithBalance:{type:Array,default:function(){return[]}},action:{type:String,default:""},values:{type:Object,default:function(){return{maxPethDraw:"",maxEthDraw:"",maxUsdDraw:"",ethCollateral:"",pethCollateral:"",usdCollateral:"",debtValue:"",maxDai:"",collateralRatio:"",cdpId:""}}},calcCollatRatioEthChg:{type:Function,default:function(){}},calcLiquidationPriceEthChg:{type:Function,default:function(){}},calcCollatRatioDaiChg:{type:Function,default:function(){}},calcLiquidationPriceDaiChg:{type:Function,default:function(){}}},data:function(){return{amount:0,amountEth:0,amountDai:0,riskyBypass:!1,modalDetailInformation:!1,textValues:{},fiatCurrency:"USD",digitalCurrency:"ETH",cancelButton:{title:"Cancel",buttonStyle:"green-border",noMinWidth:!0},submitButton:{title:"Submit",buttonStyle:"green",noMinWidth:!0}}},computed:tt({},Object(o["b"])(["account","gasPrice","web3","network","ens"]),{amountPresent:function(){return(this.amount||""!==this.amount)&&!et(this.amount).lte(0)},hasEnoughEth:function(){if(this.amount||""!==this.amount){var t=I.a.fromWei(this.account.balance,"ether");return et(this.amount).lte(et(t))}return!0},canWithdrawEthAmount:function(){return!(!this.amount&&""===this.amount)&&et(this.amount).lte(et(this.values.ethCollateral))},canProceed:function(){if(et(this.amount).lte(0))return!1;var t=et(this.newCollateralRatio),e=t.gt(1.5)||t.eq(0);return this.hasEnoughEth&&(e||this.riskyBypass)},newCollateralRatio:function(){return this.values&&this.amount>0?this.calcCollatRatioEthChg(et(this.values.ethCollateral).plus(this.amount)):this.values?this.values.collatRatio:0},newCollateralRatioSafe:function(){return this.values&&this.amount>0?this.calcCollatRatioEthChg(et(this.values.ethCollateral).plus(this.amount)).gte(2):!this.values||et(this.values.collatRatio).gte(2)},newCollateralRatioInvalid:function(){return this.values&&this.amount>0?this.calcCollatRatioEthChg(et(this.values.ethCollateral).plus(this.amount)).lte(1.5):!this.values||et(this.values.collatRatio).lte(1.5)},newLiquidationPrice:function(){return this.values&&this.amount>0?this.calcLiquidationPriceEthChg(et(this.values.ethCollateral).plus(et(this.amount))):this.values?this.values.liquidationPrice:0}}),watch:{},mounted:function(){var t=this;this.$refs.modal.$on("shown",(function(){t.amount=0}))},methods:{submitBtn:function(){this.canProceed&&this.lockEth()},checkBoxClicked:function(){this.riskyBypass=!this.riskyBypass},displayPercentValue:N["e"],displayFixedValue:N["d"],notZero:function(t){return et(t).gt(0)},currentDai:function(){this.amount=this.values.debtValue},lockEth:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:et(this.amount).gte(0)&&(this.delayCloseModal(),this.$emit("lockEth",this.amount));case 1:case"end":return t.stop()}}),null,this)},closeModal:function(){this.$refs.modal.hide()},delayCloseModal:function(){var t=this;setTimeout((function(){t.closeModal()}),200)}}},it=at,nt=(a("34bd"),Object(x["a"])(it,J,X,!1,null,"c58e58c4",null)),rt=nt.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-container"},[a("b-modal",{ref:"modal",staticClass:"bootstrap-modal nopadding",attrs:{title:t.$t("dappsMaker.withdraw-title"),centered:"","hide-footer":"",static:"",lazy:""}},[a("div",{staticClass:"modal-content-container"},[a("div",{staticClass:"inputs-container"},[a("div",{staticClass:"input-container"},[a("p",{staticClass:"message"},[t._v(" "+t._s(t.$t("dappsMaker.withdraw-notice"))+" ")]),a("label",[t._v(" "+t._s(t.$t("dappsMaker.withdraw-question")))]),a("div",{staticClass:"top-buttons"},[a("p",{staticClass:"max-withdraw",on:{click:t.maxWithdraw}},[t._v(" "+t._s(t.$t("dappsMaker.max-withdraw"))+" ")])]),a("div",{class:["input-box",t.newCollateralRatioSafe?"":"danger"]},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),a("span",{staticClass:"input-unit"},[t._v(t._s(t.digitalCurrency))])]),a("div",{staticClass:"sub-text"},[t.canWithdrawEthNotice?a("p",{staticClass:"above-max"},[t._v(" "+t._s(t.$t("dappsMaker.over-max-withdraw"))+" ")]):t._e(),a("div",{staticClass:"peth"},[a("p",{staticClass:"peth-value"},[t._v(" "+t._s(t.values.toPeth?t.displayFixedValue(t.values.toPeth(t.amount),5,!1):0)+" "+t._s(t.$t("dappsMaker.peth"))+" ")]),a("popover",{attrs:{popcontent:t.$t("dappsMaker.peth-popover")}})],1)])])]),a("expanding-option",{attrs:{title:"Detail Information"}},[a("div",{staticClass:"padding-container"},[a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.max-withdraw-available")))]),a("p",[a("b",[t._v(t._s(t.values.maxDai?t.displayFixedValue(t.values.maxEthDraw,5):0))]),t._v(" "+t._s(t.digitalCurrency)+" ")])]),a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.projected-liquidation")))]),a("p",[a("b",[t._v(t._s(t.displayFixedValue(t.newLiquidationPrice,2)))]),t._v(" "+t._s(t.fiatCurrency)+" ")])]),a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.projected-collat-ratio")))]),a("p",[a("b",[t._v(t._s(t.displayFixedValue(t.displayPercentValue(t.newCollateralRatio),3))+"%")])])])])]),!t.newCollateralRatioSafe&&t.notZero(t.amount)?a("div",{staticClass:"warning-confirmation"},[a("div",{staticClass:"grid-block"},[a("div",{staticClass:"sign"},[t._v("⚠️")]),a("div",{staticClass:"text-content"},[a("p",{staticClass:"title"},[t._v(t._s(t.$t("dappsMaker.caution")))]),a("p",{staticClass:"warning-details"},[t._v(" "+t._s(t.$t("dappsMaker.liquidation-risk",{value:t.displayFixedValue(t.displayPercentValue(t.newCollateralRatio))}))+" ")]),a("check-box",{on:{changeStatus:t.checkBoxClicked},scopedSlots:t._u([{key:"terms",fn:function(){return[a("p",{staticClass:"checkbox-label"},[t._v(" "+t._s(t.$t("dappsMaker.understand-and-agree"))+" ")])]},proxy:!0}],null,!1,196307094)})],1)])]):t._e(),a("div",{staticClass:"buttons"},[a("standard-button",{attrs:{options:t.cancelButton,"click-function":t.closeModal}}),a("standard-button",{attrs:{options:t.submitButton,"button-disabled":!t.canProceed,"click-function":t.submitBtn}})],1),a("help-center-button")],1)])],1)},ot=[];function ct(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function ut(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ct(a,!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ct(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var lt=function(t){return new m.a(t)},dt={components:{"help-center-button":h["a"],"check-box":A,"expanding-option":U["a"],"standard-button":d["a"]},props:{tokensWithBalance:{type:Array,default:function(){return[]}},action:{type:String,default:""},values:{type:Object,default:function(){return{maxPethDraw:"",maxEthDraw:"",maxUsdDraw:"",ethCollateral:"",pethCollateral:"",usdCollateral:"",debtValue:"",maxDai:"",collateralRatio:"",cdpId:""}}},calcCollatRatioEthChg:{type:Function,default:function(){}},calcLiquidationPriceEthChg:{type:Function,default:function(){}},calcCollatRatioDaiChg:{type:Function,default:function(){}},calcLiquidationPriceDaiChg:{type:Function,default:function(){}}},data:function(){return{amount:0,amountEth:0,amountDai:0,riskyBypass:!1,modalDetailInformation:!1,textValues:{},fiatCurrency:"USD",digitalCurrency:"ETH",cancelButton:{title:"Cancel",buttonStyle:"green-border",noMinWidth:!0},submitButton:{title:"Submit",buttonStyle:"green",noMinWidth:!0}}},computed:ut({},Object(o["b"])(["account","gasPrice","web3","network","ens"]),{amountPresent:function(){return(this.amount||""!==this.amount)&&!lt(this.amount).lte(0)},canCompute:function(){return this.values&&this.amountPresent},canWithdrawEthNotice:function(){return!!this.amountPresent&&!lt(this.amount).lte(lt(this.values.maxEthDraw))},canWithdrawEthAmount:function(){return!!this.amountPresent&&lt(this.amount).lte(lt(this.values.ethCollateral))},canProceed:function(){return!!this.amountPresent&&(!lt(this.amount).lte(0)&&(this.newCollateralRatioSafe&&this.canWithdrawEthAmount||!this.newCollateralRatioInvalid&&this.canWithdrawEthAmount&&this.riskyBypass))},calcCollateralRatio:function(){return this.canCompute?this.calcCollatRatioDaiChg(lt(this.values.debtValue).plus(this.amount)):this.values?this.values.collateralRatio:0},newCollateralRatio:function(){return this.canCompute?this.calcCollatRatioEthChg(lt(this.values.ethCollateral).minus(this.amount)):this.values?this.values.collatRatio:"--"},newCollateralRatioSafe:function(){return!this.canCompute||(!!this.values.zeroDebt||this.newCollateralRatio.gte(2))},newCollateralRatioInvalid:function(){return!this.canCompute||!this.values.zeroDebt&&this.newCollateralRatio.lte(1.5)},newLiquidationPrice:function(){return this.canCompute?this.calcLiquidationPriceEthChg(lt(this.values.ethCollateral).minus(this.amount)):this.values?this.values.liquidationPrice:0}}),watch:{},mounted:function(){var t=this;this.$refs.modal.$on("shown",(function(){t.amount=0})),this.$refs.modal.$on("hidden",(function(){t.amount=0}))},methods:{submitBtn:function(){this.canProceed&&this.freeEth()},checkBoxClicked:function(t){this.riskyBypass=t},displayPercentValue:N["e"],displayFixedValue:N["d"],notZero:function(t){return lt(t).gt(0)},maxWithdraw:function(){this.amount=this.values.maxEthDraw,this.$forceUpdate()},currentDai:function(){this.amount=this.values.debtValue},freeEth:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:lt(this.amount).gte(0)&&(this.delayCloseModal(),this.newCollateralRatioSafe?this.$emit("freeEth",[this.amount,null]):this.$emit("freeEth",[this.amount,this.riskyBypass]));case 1:case"end":return t.stop()}}),null,this)},closeModal:function(){this.$refs.modal.hide()},delayCloseModal:function(){var t=this;setTimeout((function(){t.closeModal()}),200)}}},ht=dt,pt=(a("ef42"),Object(x["a"])(ht,st,ot,!1,null,"2e7e7856",null)),mt=pt.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-container"},[a("b-modal",{ref:"modal",staticClass:"bootstrap-modal nopadding",attrs:{title:t.$t("dappsMaker.payback-title"),centered:"","hide-footer":"",static:"",lazy:""}},[a("div",{staticClass:"contents"},[a("p",{staticClass:"top-message"},[t._v(" "+t._s(t.$t("dappsMaker.payback-notice"))+" ")]),t.hasEnoughMkr?t._e():a("div",[a("div",{staticClass:"value-block"},[a("p",[a("b",[t._v(t._s(t.$t("dappsMaker.mkr-balance")))])]),a("p",[a("b",[t._v(t._s(t.mkrBalance)+" "+t._s(t.$t("dappsMaker.mkr")))])])]),a("p",{staticClass:"get-mkr",on:{click:function(e){return t.getMkr()}}},[t._v(" "+t._s(t.$t("dappsMaker.get-mkr"))+" ")])]),a("div",{staticClass:"input-container"},[a("div",{staticClass:"top-buttons"},[a("p",{on:{click:t.currentDai}},[t._v(t._s(t.$t("dappsMaker.set-max")))])]),a("div",{class:["dai-amount",t.hasEnoughDai?"":"danger"]},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),a("p",{staticClass:"floating-text"},[t._v(t._s(t.$t("dappsMaker.dai")))])])]),a("expanding-option",{attrs:{title:"Detail Information"}},[a("ul",{staticClass:"details"},[a("li",[a("p",[t._v(t._s(t.$t("dappsMaker.outstanding-dai")))]),a("p",[a("b",[t._v(t._s(t.values.debtValue?t.displayFixedValue(t.values.debtValue,3):0))]),t._v(" "+t._s(t.$t("dappsMaker.dai"))+" ")])]),a("li",[a("p",[t._v(t._s(t.$t("dappsMaker.stability-fee-owed")))]),a("p",[a("b",[t._v(t._s(t.values.governanceFeeOwed))]),t._v(" "+t._s(t.$t("dappsMaker.mkr"))+" ")])]),a("li",[a("p",[t._v(t._s(t.$t("dappsMaker.projected-liquidation")))]),a("p",[a("b",[t._v(t._s(t.displayFixedValue(t.newLiquidationPrice,2)))]),t._v(" "+t._s(t.fiatCurrency)+" ")])]),a("li",[a("p",[t._v(t._s(t.$t("dappsMaker.projected-collat-ratio")))]),a("p",[a("b",[t._v(t._s(t.displayFixedValue(t.displayPercentValue(t.newCollateralRatio),3))+"%")])])])])]),a("div",{staticClass:"buttons"},[t.needsDaiApprove?a("div",[a("standard-button",{attrs:{options:t.approveDaiButton,"click-function":t.approveDai}})],1):t._e(),t.needsMkrApprove?a("div",[a("standard-button",{attrs:{options:t.approveMkrButton,"click-function":t.approveMkr}})],1):t._e()]),a("div",{staticClass:"buttons"},[a("standard-button",{attrs:{options:t.cancelButton,"click-function":t.closeModal}}),a("standard-button",{attrs:{options:t.submitButton,"button-disabled":!t.canProceed,"click-function":t.submitBtn}})],1),a("help-center-button")],1)])],1)},ft=[];function gt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function yt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?gt(a,!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):gt(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var bt=function(t){return new m.a(t)},xt={components:{"help-center-button":h["a"],"expanding-option":U["a"],"standard-button":d["a"]},props:{tokensWithBalance:{type:Array,default:function(){return[]}},action:{type:String,default:""},values:{type:Object,default:function(){return{maxPethDraw:"",maxEthDraw:"",maxUsdDraw:"",ethCollateral:"",pethCollateral:"",usdCollateral:"",debtValue:"",maxDai:"",collateralRatio:"",cdpId:""}}},calcCollatRatioEthChg:{type:Function,default:function(){}},calcLiquidationPriceEthChg:{type:Function,default:function(){}},calcCollatRatioDaiChg:{type:Function,default:function(){}},calcLiquidationPriceDaiChg:{type:Function,default:function(){}}},data:function(){return{amount:0,amountEth:0,amountDai:0,mkrToken:{},daiToken:{},riskyBypass:!1,modalDetailInformation:!1,textValues:{},fiatCurrency:"USD",digitalCurrency:"ETH",cancelButton:{title:"Cancel",buttonStyle:"green-border",noMinWidth:!0,fullWidth:!0},submitButton:{title:"Submit",buttonStyle:"green",noMinWidth:!0,fullWidth:!0},approveMkrButton:{title:"Approve Maker",buttonStyle:"green-border",fullWidth:!0,noMinWidth:!0},approveDaiButton:{title:"Approve Dai",buttonStyle:"green-border",fullWidth:!0,noMinWidth:!0},suppliedFrom:{symbol:"ETH",name:"Ethereum"},suppliedTo:{symbol:"MKR",name:"Maker"},suppliedToAmount:0,destAddress:""}},computed:yt({},Object(o["b"])(["account","gasPrice","web3","network","ens"]),{amountPresent:function(){return(this.amount||""!==this.amount)&&!bt(this.amount).lte(0)},canCompute:function(){return this.values&&this.amountPresent},allOk:function(){return!this.amountPresent||this.newCollateralRatioSafe&&this.canGenerateDaiAmount},hasEnoughEth:function(){if(this.canCompute){var t=I.a.fromWei(this.account.balance,"ether");return bt(this.amount).lte(bt(t))}return!0},paybackFee:function(){return this.canCompute?bt(this.amount).div(this.values.debtValue).times(this.values.governanceFeeOwed):0},hasEnoughMkr:function(){return!this.canCompute||bt(this.mkrBalance).gte(bt(this.paybackFee))},hasEnoughDai:function(){return!this.canCompute||bt(this.amount).lte(bt(this.daiBalance))},canWithdrawEthAmount:function(){return!!this.canCompute&&bt(this.amount).lte(bt(this.values.ethCollateral))},canGenerateDaiAmount:function(){return!this.canCompute||bt(this.amount).lte(bt(this.values.maxDai))},canProceed:function(){return this.hasEnoughDai},calcCollateralRatio:function(){return this.canCompute?this.calcCollatRatioDaiChg(bt(this.values.debtValue).minus(this.amount)):this.values?this.values.collateralRatio:"--"},newCollateralRatio:function(){return this.amount>0?this.calcCollateralRatio:this.values?this.values.collatRatio:"--"},newCollateralRatioSafe:function(){return this.amount>0?!!this.calcCollateralRatio.lte(new m.a(9e-6))||this.calcCollateralRatio.gte(2):!this.values||bt(this.values.collatRatio).gte(2)},newCollateralRatioInvalid:function(){return this.amount>0?!!this.calcCollateralRatio.lte(new m.a(9e-6))||this.calcCollateralRatio.gte(1.5):!this.values||bt(this.values.collatRatio).lte(1.5)},newLiquidationPrice:function(){return this.values.debtValue&&this.amount>0?this.calcLiquidationPriceDaiChg(bt(this.values.debtValue).minus(this.amount)):this.values.liquidationPrice?this.values.liquidationPrice:0},mkrBalance:function(){return this.mkrToken?this.mkrToken.balance:0},daiBalance:function(){return this.daiToken?this.daiToken.balance:0},needsDaiApprove:function(){return!(!bt(this.values.proxyAllowanceDai).gt(0)||!bt(this.values.proxyAllowanceDai).lt(this.values.debtValue))||bt(this.values.proxyAllowanceDai).eq(0)},needsMkrApprove:function(){return!(!bt(this.values.proxyAllowanceMkr).gt(0)||!bt(this.values.proxyAllowanceMkr).lt(this.values.governanceFeeOwed))||bt(this.values.proxyAllowanceMkr).eq(0)}}),watch:{},mounted:function(){var t=this;this.$refs.modal.$on("shown",(function(){t.amount=0,t.getBalances()}))},methods:{submitBtn:function(){this.canProceed&&this.wipeDai()},checkBoxClicked:function(){this.riskyBypass=!this.riskyBypass},displayPercentValue:N["e"],displayFixedValue:N["d"],notZero:function(t){return bt(t).gt(0)},maxDai:function(){this.amount=bt(this.values.maxDai).minus(bt(this.values.maxDai).times(.01))},currentDai:function(){this.amount=this.values.debtValue},wipeDai:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:bt(this.amount).gte(0)&&(this.delayCloseModal(),bt(this.amount).gt(this.values.debtValue)?this.$emit("wipeDai",this.values.debtValue):this.$emit("wipeDai",this.amount));case 1:case"end":return t.stop()}}),null,this)},getBalances:function(){this.mkrToken=this.tokensWithBalance.find((function(t){return"MKR"===t.symbol})),this.daiToken=this.tokensWithBalance.find((function(t){return"DAI"===t.symbol}))},getMkr:function(){var t=this.paybackFee;bt(this.mkrBalance).lt(t)&&(this.suppliedToAmount=bt(t).minus(bt(this.mkrBalance)).plus(bt(t).times(.01)).toNumber(),bt(this.suppliedToAmount).lt(1e-6)&&(this.suppliedToAmount=1e-6),this.suppliedFrom={symbol:"ETH",name:"Ethereum"},this.suppliedTo={symbol:"MKR",name:"Maker"},this.$eventHub.$emit("showSwapWidgetTo",this.account.address,this.suppliedFrom,this.suppliedTo,this.suppliedToAmount))},closeModal:function(){this.$refs.modal.hide()},delayCloseModal:function(){var t=this;setTimeout((function(){t.closeModal()}),200)},approveDai:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:this.$emit("approveDai");case 1:case"end":return t.stop()}}),null,this)},approveMkr:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:this.$emit("approveMkr");case 1:case"end":return t.stop()}}),null,this)}}},kt=xt,wt=(a("a316"),Object(x["a"])(kt,vt,ft,!1,null,"65ff3c04",null)),Ct=wt.exports,Pt=a("a7ac"),_t=a.n(Pt),Rt=a("276c"),Dt=a("e954"),Mt=_t.a.MKR,Ot=_t.a.DAI,At=function(t){return new m.a(t)},$t=function(){function t(e,a,i,n){Object(Rt["a"])(this,t),this.cdpId=e,this.cdp={},this.web3=a||{},this.ready=!1,this.doUpdate=0,this.cdps=[],this.noProxy=n.noProxy||!1,this.services=i||null,this.needsUpdate=!1,this.closing=!1,this.opening=!1,this.migrated=!1,this.migrateCdpActive=!1,this.migrateCdpStage=0,this._liqPrice=At(0),this.isSafe=!1,this.debtValue=At(0),this._collatRatio=0,this.ethCollateral=At(0),this.pethCollateral=At(0),this._usdCollateral=At(0),this._governanceFee=At(0)}return Object(Dt["a"])(t,[{key:"init",value:function(){var t,e=arguments;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return t=e.length>0&&void 0!==e[0]?e[0]:this.cdpId,a.next=3,regeneratorRuntime.awrap(this.updateValues(t));case 3:return a.next=5,regeneratorRuntime.awrap(this.cdpService.getGovernanceFee(this.cdpId,Mt));case 5:return this._governanceFee=a.sent.toBigNumber(),this.ready=!0,a.abrupt("return",this);case 8:case"end":return a.stop()}}),null,this)}},{key:"updateValues",value:function(){var t,e,a=arguments;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:this.cdpId,i.next=3,regeneratorRuntime.awrap(this.services.getProxy());case 3:if(this._proxyAddress=i.sent,this.noProxy=null===this._proxyAddress,!this._proxyAddress){i.next=11;break}return i.next=8,regeneratorRuntime.awrap(this.services.getCdp(t,this._proxyAddress));case 8:this.cdp=i.sent,i.next=14;break;case 11:return i.next=13,regeneratorRuntime.awrap(this.services.getCdp(t,!1));case 13:this.cdp=i.sent;case 14:return i.next=16,regeneratorRuntime.awrap(this.cdp.getLiquidationPrice());case 16:return e=i.sent,this._liqPrice=e.toBigNumber().toFixed(2),i.next=20,regeneratorRuntime.awrap(this.cdp.isSafe());case 20:return this.isSafe=i.sent,i.next=23,regeneratorRuntime.awrap(this.cdp.getDebtValue());case 23:return this.debtValue=i.sent.toBigNumber(),i.next=26,regeneratorRuntime.awrap(this.cdp.getCollateralizationRatio());case 26:return this._collatRatio=i.sent,i.next=29,regeneratorRuntime.awrap(this.cdp.getCollateralValue());case 29:return this.ethCollateral=i.sent.toBigNumber(),i.next=32,regeneratorRuntime.awrap(this.cdp.getCollateralValue(_t.a.PETH));case 32:return this.pethCollateral=i.sent.toBigNumber(),i.next=35,regeneratorRuntime.awrap(this.cdp.getCollateralValue(_t.a.USD));case 35:this._usdCollateral=i.sent.toBigNumber();case 36:case"end":return i.stop()}}),null,this)}},{key:"update",value:function(){var t;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.migrated){e.next=8;break}return e.next=3,regeneratorRuntime.awrap(this.proxyService.currentProxy());case 3:if(t=e.sent,!t){e.next=8;break}return this.migrated=!1,e.next=8,regeneratorRuntime.awrap(this.cdpService.give(this.cdpId,this._proxyAddress));case 8:if(!this.needsUpdate){e.next=15;break}return this.opening=!1,this.needsUpdate=!1,e.next=13,regeneratorRuntime.awrap(this.updateValues(this.cdpId));case 13:return this.doUpdate++,e.abrupt("return",this);case 15:return e.abrupt("return",this);case 16:case"end":return e.stop()}}),null,this)}},{key:"getProxy",value:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.services.getProxy());case 2:this._proxyAddress=t.sent;case 3:case"end":return t.stop()}}),null,this)}},{key:"migrateCdp",value:function(){var t;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.getProxy());case 2:if(t=e.sent,t){e.next=10;break}return this.needsUpdate=!0,e.next=7,regeneratorRuntime.awrap(this.proxyService.ensureProxy());case 7:return e.abrupt("return",e.sent);case 10:if(!this.needToFinishMigrating){e.next=14;break}return this.needsUpdate=!0,e.next=14,regeneratorRuntime.awrap(this.cdpService.give(this.cdpId,this._proxyAddress));case 14:case"end":return e.stop()}}),null,this)}},{key:"openCdp",value:function(t,e){var a;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:if(!(t<=0)){i.next=2;break}return i.abrupt("return",0);case 2:if(this.hasProxy){i.next=10;break}return this.opening=!0,this.needsUpdate=!0,i.next=7,regeneratorRuntime.awrap(this.cdpService.openProxyCdpLockEthAndDrawDai(t,e,null));case 7:a=i.sent,i.next=15;break;case 10:return this.opening=!0,this.needsUpdate=!0,i.next=14,regeneratorRuntime.awrap(this.cdpService.openProxyCdpLockEthAndDrawDai(t,e,this.proxyAddress));case 14:a=i.sent;case 15:return i.abrupt("return",a.id);case 16:case"end":return i.stop()}}),null,this)}},{key:"lockEth",value:function(t){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!this.noProxy){e.next=3;break}return e.abrupt("return");case 3:return this.needsUpdate=!0,e.next=6,regeneratorRuntime.awrap(this.cdpService.lockEthProxy(this._proxyAddress,this.cdpId,t));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error(e.t0);case 11:case"end":return e.stop()}}),null,this,[[0,8]])}},{key:"drawDai",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.calcCollatRatio(this.ethCollateral,this.debtValue.plus(t)).gt(2)||e)try{if(this.noProxy)return;this.needsUpdate=!0,this.cdpService.drawDaiProxy(this._proxyAddress,this.cdpId,t)}catch(a){console.error(a)}}},{key:"freeEth",value:function(t){var e,a=arguments;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:if(e=a.length>1&&void 0!==a[1]&&a[1],!(this.debtValue.eq(0)||this.calcCollatRatio(this.ethCollateral.minus(t),this.debtValue).gt(1.5)||e)){i.next=13;break}if(i.prev=2,!this.noProxy){i.next=5;break}return i.abrupt("return");case 5:return this.needsUpdate=!0,i.next=8,regeneratorRuntime.awrap(this.cdpService.freeEthProxy(this._proxyAddress,this.cdpId,t));case 8:i.next=13;break;case 10:i.prev=10,i.t0=i["catch"](2),console.error(i.t0);case 13:case"end":return i.stop()}}),null,this,[[2,10]])}},{key:"wipeDai",value:function(t){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!this.noProxy){e.next=3;break}return e.abrupt("return");case 3:return this.needsUpdate=!0,e.next=6,regeneratorRuntime.awrap(this.cdpService.wipeDaiProxy(this._proxyAddress,this.cdpId,t));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error(e.t0);case 11:case"end":return e.stop()}}),null,this,[[0,8]])}},{key:"canCloseCdp",value:function(){var t;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.debtValue.toNumber(),e.next=3,regeneratorRuntime.awrap(this.cdpService.enoughMkrToWipe(this.cdpId,t));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),null,this)}},{key:"closeCdp",value:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,this.needsUpdate=!0,this.closing=!0,!this.hasProxy){t.next=6;break}return t.next=6,regeneratorRuntime.awrap(this.cdpService.shutProxy(this._proxyAddress,this.cdpId));case 6:t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log("closeCdp Error:"),console.error(t.t0);case 12:case"end":return t.stop()}}),null,this,[[0,8]])}},{key:"checkIfDestAddressHasProxy",value:function(t){var e;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.getProxy());case 2:return a.next=4,regeneratorRuntime.awrap(this.proxyService.getProxyAddress(t));case 4:return e=a.sent,a.abrupt("return",e);case 6:case"end":return a.stop()}}),null,this)}},{key:"moveCdp",value:function(t){var e;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.getProxy());case 2:return a.next=4,regeneratorRuntime.awrap(this.proxyService.getProxyAddress(t));case 4:if(e=a.sent,!e){a.next=12;break}return this.needsUpdate=!0,this.closing=!0,a.next=10,regeneratorRuntime.awrap(this.cdpService.giveProxy(this._proxyAddress,this.cdpId,e));case 10:a.next=23;break;case 12:if(this.noProxy){a.next=19;break}return this.needsUpdate=!0,this.closing=!0,a.next=17,regeneratorRuntime.awrap(this.cdpService.giveProxy(this._proxyAddress,this.cdpId,t));case 17:a.next=23;break;case 19:return this.needsUpdate=!0,this.closing=!0,a.next=23,regeneratorRuntime.awrap(this.cdpService.give(this.cdpId,t));case 23:case"end":return a.stop()}}),null,this)}},{key:"enoughMkrToWipe",value:function(t){return this.cdpService.enoughMkrToWipe(t,Ot.wei)}},{key:"toUSD",value:function(t){var e=this.services.toUSD(t);return e.lt(0)?At(0):e}},{key:"toPeth",value:function(t){return this.services.toPeth(t)}},{key:"maxDaiDraw",value:function(){var t=At(this.ethPrice).times(At(this.ethCollateral)),e=At(this.debtValue).times(At(this.liquidationRatio));return t.minus(e).div(At(this.ethPrice))}},{key:"calcCollatRatio",value:function(t,e){return t<=0||e<=0?At(0):Object(N["a"])(this.ethPrice,t,e)}},{key:"calcLiquidationPrice",value:function(t,e){return t<=0||e<=0?At(0):Object(N["b"])(t,e,this.ethPrice,this.liquidationRatio)}},{key:"approveDai",value:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.daiToken.approveUnlimited(this.proxyAddress));case 2:case"end":return t.stop()}}),null,this)}},{key:"approveMkr",value:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.mkrToken.approveUnlimited(this.proxyAddress));case 2:case"end":return t.stop()}}),null,this)}},{key:"getDaiBalances",value:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.services.daiToken.balance());case 2:return this.daiBalance=t.sent,t.abrupt("return",this.daiBalance);case 4:case"end":return t.stop()}}),null,this)}},{key:"currentAddress",get:function(){return this.services.account.address}},{key:"liquidationPenalty",get:function(){return this.services.liquidationPenalty}},{key:"stabilityFee",get:function(){return this.services.stabilityFee}},{key:"ethPrice",get:function(){return this.services.ethPrice}},{key:"pethPrice",get:function(){return this.services._pethPrice}},{key:"wethToPethRatio",get:function(){return this.services.wethToPethRatio}},{key:"liquidationRatio",get:function(){return this.services.liquidationRatio}},{key:"proxyAddress",get:function(){return this.services._proxyAddress}},{key:"hasProxy",get:function(){return this.services.hasProxy}},{key:"proxyAllowanceDai",get:function(){return this.services.proxyAllowanceDai}},{key:"proxyAllowanceMkr",get:function(){return this.services.proxyAllowanceMkr}},{key:"daiToken",get:function(){return this.services._daiToken}},{key:"daiBalance",get:function(){return this.services.daiBalance}},{key:"mkrToken",get:function(){return this.services._mkrToken}},{key:"mkrBalance",get:function(){return this.services.mkrBalance}},{key:"proxyService",get:function(){return this.services._proxyService}},{key:"cdpService",get:function(){return this.services._cdpService}},{key:"minEth",get:function(){return this.services.minEth()}},{key:"pethMin",get:function(){return this.services.pethMin}},{key:"zeroDebt",get:function(){return At(this.debtValue).eq(0)}},{key:"usdCollateral",get:function(){return this.toUSD(this.ethCollateral)}},{key:"ethCollateralNum",get:function(){return this.ethCollateral.toNumber()}},{key:"collatRatio",get:function(){return this._collatRatio}},{key:"liquidationPrice",get:function(){return this._liqPrice}},{key:"governanceFeeOwed",get:function(){return this._governanceFee}},{key:"maxDai",get:function(){return this.ethPrice&&this.ethCollateral&&this.liquidationRatio&&this.debtValue?Object(N["f"])(this.ethPrice,this.ethCollateral,this.liquidationRatio.plus(.001),this.debtValue):At(0)}},{key:"maxEthDraw",get:function(){return this.ethPrice&&this.debtValue&&this.liquidationRatio?this.zeroDebt?Object(N["g"])(this.ethCollateral,this.liquidationRatio,this.debtValue,this.ethPrice,this.minEth.times(0)):Object(N["g"])(this.ethCollateral,this.liquidationRatio,this.debtValue,this.ethPrice):At(0)}},{key:"maxPethDraw",get:function(){return this.pethPrice&&this.pethCollateral&&this.liquidationRatio?this.zeroDebt?Object(N["h"])(this.pethCollateral,this.liquidationRatio,this.debtValue,this.pethPrice,this.pethMin.times(0)):Object(N["h"])(this.pethCollateral,this.liquidationRatio,this.debtValue,this.pethPrice):At(0)}},{key:"maxUsdDraw",get:function(){return this.pethPrice&&this.pethCollateral&&this.liquidationRatio?this.toUSD(this.maxEthDraw):At(0)}},{key:"needToFinishMigrating",get:function(){return this._proxyAddress&&this.noProxy}}],[{key:"toNumber",value:function(t){return m.a.isBigNumber(t)?t.toNumber():At(t).toNumber()}},{key:"displayPercentValue",value:function(t){return m.a.isBigNumber(t)||(t=new m.a(t)),t.times(100).toString()}},{key:"displayFixedValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return m.a.isBigNumber(t)||(t=new m.a(t)),a?t.toFixed(e,m.a.ROUND_DOWN).toString():t.toFixed(e).toString()}}]),t}(),St=a("b7d3"),Bt=a("1383");function Et(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function jt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Et(a,!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Et(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Vt=_t.a.MKR,qt=_t.a.DAI,Tt=function(t){return new m.a(t)},Wt=function(t,e,a){return Tt(t).times(Tt(e)).div(Tt(a))},Ft={components:{"generate-modal":Z,"deposit-modal":rt,"withdraw-modal":mt,"payback-modal":Ct,"back-button":c["a"],"close-cdp-modal":w,"move-cdp-modal":q},props:{tokensWithBalance:{type:Array,default:function(){return[]}},getBalance:{type:Function,default:function(){}},highestGas:{type:String,default:"0"}},data:function(){return{destAddressProxy:"",destAddressHasProxy:!1,afterUpdate:[],allCdpIds:[],activeCdp:{},activeValues:{maxPethDraw:Tt(0),maxEthDraw:Tt(0),maxUsdDraw:Tt(0),ethCollateral:Tt(0),pethCollateral:Tt(0),usdCollateral:Tt(0),debtValue:Tt(0),maxDai:Tt(0),collateralRatio:Tt(0),minEth:Tt(0),cdpId:"--"},availableCdps:{},cdps:[],cdpsWithoutProxy:[],cdpService:{},cdpDetailsLoaded:!1,currentProxy:null,currentCdpId:"",creatingCdp:!1,daiPrice:0,daiQty:0,ethPrice:Tt(0),ethQty:0,liquidationRatio:Tt(0),liquidationPenalty:Tt(0),makerActive:!1,makerCdp:{},makerManager:{},migrationInProgress:{},openCloseModal:!1,openMoveModal:!1,proxyService:{},proxyAddress:null,pethPrice:Tt(0),pethMin:Tt(0),priceService:{},priceFloor:0,stabilityFee:Tt(0),sysVars:{},sysServices:{},targetPrice:0,valuesUpdated:0,wethToPethRatio:Tt(0)}},computed:jt({},Object(o["b"])(["account","gasPrice","web3","network","ens"]),{maxDaiDraw:function(){return this.ethQty<=0?0:Wt(this.ethPrice,this.ethQty,this.liquidationRatio)},minEthDeposit:function(){return this.daiQty<=0?0:Wt(this.liquidationRatio,this.daiQty,this.ethPrice)},showMoveOrClose:function(){return"manage-sai"===this.$route.name||"migrate-sai"===this.$route.name},showManage:function(){return this.listCdps||this.cdps.length>=1&&this.cdpsWithoutProxy.length>=1},showRefresh:function(){return this.cdps.length>0||this.cdpsWithoutProxy.length>0},onCreate:function(){return"create-sai"===this.$route.name},showCreateProxy:function(){return!this.showCdpMigrateButtons&&(!this.hasProxy&&!this.onCreate)},showCdpMigrateButtons:function(){return this.hasProxy&&this.cdpsWithoutProxy.length>=1},listCdps:function(){return this.cdps.length>1||this.cdpsWithoutProxy.length>1},hasProxy:function(){return null!==this.proxyAddress},currentProxyAddress:function(){return this.proxyAddress}}),watch:Object(s["a"])({},"account.address",(function(){this.makerActive=!1,this.setup()})),destroyed:function(){this.priceService={},this.cdpService={},this.proxyService={},this.availableCdps={},this.activeCdp={},this.makerCdp={},this.sysVars={},this.sysServices={}},mounted:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.setup());case 2:case"end":return t.stop()}}),null,this)},methods:{modalHidden:function(){this.openCloseModal=!1,this.openMoveModal=!1},gotoHome:function(){this.$router.push({name:"Maker-sai"})},gotoCreate:function(){this.$route.path.includes("maker-sai")&&(this.activeValues=this.systemValues,this.$router.push({name:"create-sai"}))},goToManage:function(){this.$route.path.includes("maker-sai")&&(1===this.cdps.length?this.$router.push({name:"manage-sai",params:{cdpId:this.cdps[0]}}):1===this.cdpsWithoutProxy.length?this.$router.push({name:"migrate-sai",params:{cdpId:this.cdpsWithoutProxy[0]}}):this.showManage?this.$router.push({name:"select-sai"}):this.gotoCreate())},openManage:function(t){this.$route.path.includes("maker-sai")&&(this.setupCdpManage(t),this.$router.push({name:"manage-sai",params:{cdpId:t}}))},openMigrate:function(t){this.$route.path.includes("maker-sai")&&(this.setupCdpManage(t),this.$router.push({name:"migrate-sai",params:{cdpId:t}}))},showDeposit:function(){this.$refs.deposit.$refs.modal.show()},showWithdraw:function(){this.$refs.withdraw.$refs.modal.show()},showPayback:function(){this.$refs.payback.$refs.modal.show()},showGenerate:function(){this.$refs.generate.$refs.modal.show()},showClose:function(){var t=this;this.$refs.closeCdp.$refs.modal.$on("hidden",(function(){t.$emit("modalHidden")})),this.$refs.closeCdp.$refs.modal.show()},showMove:function(){var t=this;this.$refs.moveCdp.$refs.modal.$on("hidden",(function(){t.$emit("modalHidden")})),this.destAddressHasProxy=!1,this.$refs.moveCdp.$refs.modal.show()},setup:function(){var t,e,a,i,n,r,s;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return this.activeCdps={},this.currentCdp={},t=this.web3,e=this,this.gotoHome(),a=Object(Bt["a"])(t,e.account.address,(function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$route.path.includes("maker-sai")){t.next=3;break}return t.next=3,regeneratorRuntime.awrap(e.doUpdate());case 3:case"end":return t.stop()}}))})),o.next=8,regeneratorRuntime.awrap(_t.a.create("inject",{provider:{inject:t.currentProvider},plugins:[a],accounts:{myLedger1:{type:"mew"}}}));case 8:return this.maker=o.sent,o.next=11,regeneratorRuntime.awrap(this.maker.authenticate());case 11:return this._priceService=this.maker.service("price"),o.next=14,regeneratorRuntime.awrap(this.maker.service("cdp"));case 14:return this._cdpService=o.sent,o.next=17,regeneratorRuntime.awrap(this.maker.service("proxy"));case 17:return this._proxyService=o.sent,o.next=20,regeneratorRuntime.awrap(this.maker.service("token"));case 20:return this._tokenService=o.sent,this.pethMin=Tt(.005),o.t0=Tt,o.next=25,regeneratorRuntime.awrap(this._priceService.getEthPrice());case 25:return o.t1=o.sent.toNumber(),this.ethPrice=(0,o.t0)(o.t1),o.t2=Tt,o.next=30,regeneratorRuntime.awrap(this._priceService.getPethPrice());case 30:return o.t3=o.sent.toNumber(),this.pethPrice=(0,o.t2)(o.t3),o.t4=Tt,o.next=35,regeneratorRuntime.awrap(this._priceService.getPethPrice());case 35:return o.t5=o.sent.toNumber(),this._targetPrice=(0,o.t4)(o.t5),o.t6=Tt,o.next=40,regeneratorRuntime.awrap(this._cdpService.getLiquidationRatio());case 40:return o.t7=o.sent,this.liquidationRatio=(0,o.t6)(o.t7),o.t8=Tt,o.next=45,regeneratorRuntime.awrap(this._cdpService.getLiquidationPenalty());case 45:return o.t9=o.sent,this.liquidationPenalty=(0,o.t8)(o.t9),o.t10=Tt,o.next=50,regeneratorRuntime.awrap(this._cdpService.getAnnualGovernanceFee());case 50:return o.t11=o.sent,this.stabilityFee=(0,o.t10)(o.t11),o.t12=Tt,o.next=55,regeneratorRuntime.awrap(this._priceService.getWethToPethRatio());case 55:return o.t13=o.sent,this.wethToPethRatio=(0,o.t12)(o.t13),o.next=59,regeneratorRuntime.awrap(this._proxyService.currentProxy());case 59:return this.proxyAddress=o.sent,this.daiToken=this._tokenService.getToken(qt),o.next=63,regeneratorRuntime.awrap(this.daiToken.balance());case 63:return this.daiBalance=o.sent.toBigNumber(),this.mkrToken=this._tokenService.getToken(Vt),o.next=67,regeneratorRuntime.awrap(this.mkrToken.balance());case 67:return this.mkrBalance=o.sent.toBigNumber(),i=Tt(this.pethMin).times(this.wethToPethRatio),this.systemValues={stabilityFee:this.stabilityFee,minEth:i,liquidationRatio:this.liquidationRatio,wethToPethRatio:this.wethToPethRatio,liquidationPenalty:this.liquidationPenalty,targetPrice:this._targetPrice,pethPrice:this.pethPrice},o.next=72,regeneratorRuntime.awrap(this.checkAllowances());case 72:return o.next=74,regeneratorRuntime.awrap(this.locateCdps());case 74:if(n=o.sent,r=n.withProxy,s=n.withoutProxy,this.cdps=r,this.cdpsWithoutProxy=s,!(this.cdps.length>0||this.cdpsWithoutProxy.length>0)){o.next=82;break}return o.next=82,regeneratorRuntime.awrap(this.loadCdpDetails());case 82:this.currentProxy=this.getProxy(),this.cdps.length>0||this.cdpsWithoutProxy.length>0?(this.cdpDetailsLoaded=!0,this.makerActive=!0,"create-sai"!==this.$route.name&&this.$route.path.includes("maker-sai")&&this.goToManage()):this.gotoCreate();case 84:case"end":return o.stop()}}),null,this)},buildEmpty:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.buildCdpObject(null));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),null,this)},addCdp:function(){this.creatingCdp=!0},removeCdp:function(t){try{delete this.availableCdps[t.id],$["e"].responseHandler(this.$t("dapps-maker.cdp-closed"),$["e"].INFO)}catch(e){console.error(e)}},migrateCdpExternal:function(t){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return this.afterUpdate.push(this.goToManage),e.next=3,regeneratorRuntime.awrap(this.migrateCdp(t));case 3:case"end":return e.stop()}}),null,this)},refreshExternal:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.doUpdate());case 2:case"end":return t.stop()}}),null,this)},refresh:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.doUpdate());case 2:case"end":return t.stop()}}),null,this)},doUpdate:function(){var t,e,a,i,n,r=this;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,regeneratorRuntime.awrap(this.getProxy());case 2:return this.proxyAddress=s.sent,t=!1,e="create-sai"===this.$route.name,s.next=7,regeneratorRuntime.awrap(this.updateActiveCdp());case 7:a=function(e){return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:if(!r.activeCdps[e].needsUpdate){a.next=16;break}if(!r.activeCdps[e].closing){a.next=8;break}t=!0,delete r.activeCdps[e],r.cdps=r.cdps.filter((function(t){return t!==e})),r.cdpsWithoutProxy=r.cdpsWithoutProxy.filter((function(t){return t!==e})),a.next=16;break;case 8:if(!r.activeCdps[e].opening){a.next=13;break}return a.next=11,regeneratorRuntime.awrap(r.activeCdps[e].updateValues());case 11:a.next=16;break;case 13:return a.next=15,regeneratorRuntime.awrap(r.activeCdps[e].update());case 15:r.activeCdps[e]=a.sent;case 16:if(e!==r.currentCdpId){a.next=21;break}return a.next=19,regeneratorRuntime.awrap(r.currentCdp.update());case 19:return a.next=21,regeneratorRuntime.awrap(r.setupCdpManage(r.currentCdpId));case 21:case"end":return a.stop()}}))},s.t0=regeneratorRuntime.keys(this.activeCdps);case 9:if((s.t1=s.t0()).done){s.next=15;break}return i=s.t1.value,s.next=13,regeneratorRuntime.awrap(a(i));case 13:s.next=9;break;case 15:return s.next=17,regeneratorRuntime.awrap(this.daiToken.balance());case 17:return this.daiBalance=s.sent.toBigNumber(),s.next=20,regeneratorRuntime.awrap(this.mkrToken.balance());case 20:return this.mkrBalance=s.sent.toBigNumber(),s.next=23,regeneratorRuntime.awrap(this.checkAllowances());case 23:if(Object.keys(this.activeCdps).includes(this.currentCdpId)){s.next=30;break}return s.next=26,regeneratorRuntime.awrap(this.loadCdpDetails());case 26:return s.next=28,regeneratorRuntime.awrap(this.setupCdpManage(this.currentCdpId));case 28:s.next=32;break;case 30:return s.next=32,regeneratorRuntime.awrap(this.setupCdpManage(this.currentCdpId));case 32:if(n=function t(){if(r.afterUpdate.length>0){var e=r.afterUpdate.pop();e(),t()}},n(),(t||e||this.creatingCdp)&&(this.cdps.length>0||this.cdpsWithoutProxy.length>0?this.goToManage():this.gotoCreate()),!this.creatingCdp){s.next=42;break}return this.creatingCdp=!1,s.next=39,regeneratorRuntime.awrap(this.updateActiveCdp());case 39:$["e"].responseHandler(this.$t("dapps-maker.cdp-closed"),$["e"].INFO),s.next=44;break;case 42:this.valuesUpdated++,$["e"].responseHandler(this.$t("dapps-maker.cdp-closed"),$["e"].INFO);case 44:case"end":return s.stop()}}),null,this)},checkAllowances:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.proxyAddress){t.next=7;break}return t.next=3,regeneratorRuntime.awrap(this.daiToken.allowance(this.account.address,this.proxyAddress));case 3:return this._proxyAllowanceDai=t.sent.toBigNumber(),t.next=6,regeneratorRuntime.awrap(this.mkrToken.allowance(this.account.address,this.proxyAddress));case 6:this._proxyAllowanceMkr=t.sent.toBigNumber();case 7:case"end":return t.stop()}}),null,this)},setupCdpManage:function(t){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.allCdpIds.includes(t)&&this.allCdpIds.length>0&&(t=this.allCdpIds[0]),0!==this.allCdpIds.length){e.next=5;break}this.activeValues=this.systemValues,e.next=9;break;case 5:return this.currentCdpId=t,e.next=8,regeneratorRuntime.awrap(this.getValuesForManage(t));case 8:this.activeValues=e.sent;case 9:case"end":return e.stop()}}),null,this)},getValuesForManage:function(t){var e,a,i,n,r;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return e=this.activeCdps[t],this.currentCdp=e,a=this._proxyAllowanceDai,i=this._proxyAllowanceMkr,n=this.toPeth,r=this.systemValues,s.abrupt("return",jt({},r,{cdpId:t,maxPethDraw:e.maxPethDraw,maxEthDraw:e.maxEthDraw,maxUsdDraw:e.maxUsdDraw,ethCollateral:e.ethCollateral,pethCollateral:e.pethCollateral,usdCollateral:e.usdCollateral,debtValue:e.debtValue,maxDai:e.maxDai,collateralRatio:e.collatRatio,liquidationPrice:e.liquidationPrice,minEth:e.minEth,isSafe:!1,governanceFeeOwed:e.governanceFeeOwed,ethCollateralNum:e.ethCollateralNum,toPeth:n,proxyAllowanceDai:a,proxyAllowanceMkr:i,zeroDebt:e.zeroDebt}));case 7:case"end":return s.stop()}}),null,this)},locateCdps:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return this.cdpsWithoutProxy=[],t.next=3,regeneratorRuntime.awrap(this.locateCdpsWithoutProxy());case 3:return this.cdpsWithoutProxy=t.sent,this.cdps=[],t.next=7,regeneratorRuntime.awrap(this.locateCdpsProxy());case 7:return this.cdps=t.sent,this.allCdpIds=[].concat(Object(r["a"])(this.cdpsWithoutProxy),Object(r["a"])(this.cdps)),t.abrupt("return",{withProxy:this.cdps,withoutProxy:this.cdpsWithoutProxy});case 10:case"end":return t.stop()}}),null,this)},locateCdpsWithoutProxy:function(){var t,e;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this._cdpService.getCdpIds(this.account.address));case 2:return t=a.sent,a.next=5,regeneratorRuntime.awrap(this._cdpService.getCdpIds(Object(St["b"])(this.account.address)));case 5:return e=a.sent,a.abrupt("return",t.concat(e));case 7:case"end":return a.stop()}}),null,this)},locateCdpsProxy:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.getProxy());case 2:return this.proxyAddress=t.sent,t.next=5,regeneratorRuntime.awrap(this._cdpService.getCdpIds(this.proxyAddress));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),null,this)},updateActiveCdp:function(){var t,e,a,i,n,r,s=this;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return t=Object.keys(this.activeCdps),o.next=3,regeneratorRuntime.awrap(this.locateCdps());case 3:if(e=this.cdps.filter((function(t){return!Object.keys(s.activeCdps).includes(t.toString())})),a=this.cdpsWithoutProxy.filter((function(t){return!Object.keys(s.activeCdps).includes(t.toString())})),i=t.filter((function(t){return!(s.cdps.includes(t.toString())||s.cdpsWithoutProxy.includes(t.toString()))})),i.length>0&&i.forEach((function(t){return delete s.activeCdps[t]})),!(e.length>0)){o.next=16;break}n=0;case 9:if(!(n<e.length)){o.next=16;break}return o.next=12,regeneratorRuntime.awrap(this.buildCdpObject(e[n]));case 12:this.activeCdps[e[n]]=o.sent;case 13:n++,o.next=9;break;case 16:if(!(a.length>0)){o.next=25;break}r=0;case 18:if(!(r<a.length)){o.next=25;break}return o.next=21,regeneratorRuntime.awrap(this.buildCdpObject(a[r],{noProxy:!0}));case 21:this.activeCdps[a[r]]=o.sent;case 22:r++,o.next=18;break;case 25:0===this.cdps.length&&0===this.cdpsWithoutProxy.length&&this.gotoCreate();case 26:case"end":return o.stop()}}),null,this)},loadCdpDetails:function(){var t,e;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:t=0;case 1:if(!(t<this.cdps.length)){a.next=8;break}return a.next=4,regeneratorRuntime.awrap(this.buildCdpObject(this.cdps[t]));case 4:this.activeCdps[this.cdps[t]]=a.sent;case 5:t++,a.next=1;break;case 8:e=0;case 9:if(!(e<this.cdpsWithoutProxy.length)){a.next=16;break}return a.next=12,regeneratorRuntime.awrap(this.buildCdpObject(this.cdpsWithoutProxy[e],{noProxy:!0}));case 12:this.activeCdps[this.cdpsWithoutProxy[e]]=a.sent;case 13:e++,a.next=9;break;case 16:case"end":return a.stop()}}),null,this)},buildCdpObject:function(t){var e,a,i,n,r=arguments;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:if(e=r.length>1&&void 0!==r[1]?r[1]:{},a=jt({},e,{_proxyAddress:this.proxyAddress,liquidationPenalty:this.liquidationPenalty,stabilityFee:this.stabilityFee,ethPrice:this.ethPrice,_pethPrice:this.pethPrice,wethToPethRatio:this.wethToPethRatio,_targetPrice:this._targetPrice,liquidationRatio:this.liquidationRatio,proxyAllowanceDai:this.proxyAllowanceDai,proxyAllowanceMkr:this.proxyAllowanceMkr,_daiToken:this._daiToken,daiBalance:this.daiBalance,_mkrToken:this._mkrToken,mkrBalance:this.mkrBalance,minEth:this.minEth,pethMin:this.pethMin}),!this.cdpsWithoutProxy.includes(t)){s.next=8;break}return s.next=5,regeneratorRuntime.awrap(this.getMakerCdp(t,!1));case 5:this.cdp=s.sent,s.next=17;break;case 8:if(!this.cdps.includes(t)){s.next=14;break}return s.next=11,regeneratorRuntime.awrap(this.getMakerCdp(t,this.proxyAddress));case 11:this.cdp=s.sent,s.next=17;break;case 14:return s.next=16,regeneratorRuntime.awrap(this.getMakerCdp(t,!1));case 16:this.cdp=s.sent;case 17:if(i={_proxyService:this._proxyService,priceService:this.priceService,_cdpService:this._cdpService,doUpdate:this.doUpdate,getProxy:this.getProxy,hasProxy:this.hasProxy,getCdp:this.getMakerCdp,toPeth:this.toPeth,toUSD:this.toUSD,_proxyAddress:this.proxyAddress,liquidationPenalty:this.liquidationPenalty,stabilityFee:this.stabilityFee,ethPrice:this.ethPrice,_pethPrice:this.pethPrice,wethToPethRatio:this.wethToPethRatio,_targetPrice:this._targetPrice,liquidationRatio:this.liquidationRatio,proxyAllowanceDai:this.proxyAllowanceDai,proxyAllowanceMkr:this.proxyAllowanceMkr,_daiToken:this._daiToken,daiBalance:this.daiBalance,_mkrToken:this._mkrToken,mkrBalance:this.mkrBalance,minEth:this.minEth,pethMin:this.pethMin},n=new $t(t,this.web3,i,a),!t){s.next=23;break}return s.next=22,regeneratorRuntime.awrap(n.init(t));case 22:return s.abrupt("return",s.sent);case 23:return s.abrupt("return",n);case 24:case"end":return s.stop()}}),null,this)},getProxy:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this._proxyService.currentProxy());case 2:if(this.proxyAddress=t.sent,this.proxyAddress){t.next=8;break}return t.next=6,regeneratorRuntime.awrap(this._proxyService.getProxyAddress(this.account.address));case 6:this.proxyAddress=t.sent,this.proxyAddress&&(this.noProxy=!1);case 8:return t.abrupt("return",this.proxyAddress);case 9:case"end":return t.stop()}}),null,this)},lockEth:function(t){this.currentCdp.lockEth(t)},wipeDai:function(t){this.currentCdp.wipeDai(t)},freeEth:function(t){null===t[1]?this.currentCdp.freeEth(t[0]):this.currentCdp.freeEth(t[0],t[1])},drawDai:function(t){null===t[1]?this.currentCdp.drawDai(t[0]):this.currentCdp.drawDai(t[0],t[1])},closeCdp:function(){this.currentCdp.closeCdp()},checkIfDestAddressHasProxy:function(t){var e=this;this.currentCdp.checkIfDestAddressHasProxy(t).then((function(t){e.destAddressProxy=t,e.destAddressHasProxy=null!==t})).catch((function(t){throw t}))},moveCdp:function(t){this.currentCdp.moveCdp(t)},calcCollatRatioDaiChg:function(t){return Tt(this.currentCdp.calcCollatRatio(this.currentCdp.ethCollateral,t))},calcCollatRatioEthChg:function(t){return Tt(this.currentCdp.calcCollatRatio(t,this.currentCdp.debtValue))},calcLiquidationPriceDaiChg:function(t){return Tt(this.currentCdp.calcLiquidationPrice(this.currentCdp.ethCollateral,t))},calcLiquidationPriceEthChg:function(t){return Tt(this.currentCdp.calcLiquidationPrice(t,this.currentCdp.debtValue))},approveDai:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this._tokenService.getToken(qt).approveUnlimited(this.proxyAddress));case 2:case"end":return t.stop()}}),null,this)},approveMkr:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:this._tokenService.getToken(Vt).approveUnlimited(this.proxyAddress);case 1:case"end":return t.stop()}}),null,this)},hasCdp:function(t){return Object.keys(this.activeCdps).includes(Tt(t).toString())},getCdp:function(t){return this.activeCdps[t]},getMakerCdp:function(t){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return");case 2:if(!this.cdpsWithoutProxy.includes(t)){e.next=8;break}return e.next=5,regeneratorRuntime.awrap(this.maker.getCdp(t,!1));case 5:return e.abrupt("return",e.sent);case 8:if(!this.cdps.includes(t)||!this.proxyAddress){e.next=14;break}return e.next=11,regeneratorRuntime.awrap(this.maker.getCdp(t,this.proxyAddress));case 11:return e.abrupt("return",e.sent);case 14:if(!this.proxyAddress){e.next=18;break}return e.next=17,regeneratorRuntime.awrap(this.maker.getCdp(t,this.proxyAddress));case 17:return e.abrupt("return",e.sent);case 18:return e.next=20,regeneratorRuntime.awrap(this.maker.getCdp(t,!1));case 20:return e.abrupt("return",e.sent);case 21:case"end":return e.stop()}}),null,this)},buildProxy:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.getProxy());case 2:if(this.proxyAddress=t.sent,this.proxyAddress){t.next=10;break}return t.next=6,regeneratorRuntime.awrap(this._proxyService.build());case 6:return t.next=8,regeneratorRuntime.awrap(this._proxyService.currentProxy());case 8:return this.proxyAddress=t.sent,t.abrupt("return",this.proxyAddress);case 10:return t.next=12,regeneratorRuntime.awrap(this._proxyService.currentProxy());case 12:return this.proxyAddress=t.sent,t.abrupt("return",this.proxyAddress);case 14:case"end":return t.stop()}}),null,this)},migrateCdp:function(t){var e;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.getProxy());case 2:if(e=a.sent,!e){a.next=6;break}return a.next=6,regeneratorRuntime.awrap(this._cdpService.give(t,e));case 6:case"end":return a.stop()}}),null,this)},minEth:function(){return this.wethToPethRatio?Tt(this.pethMin).times(this.wethToPethRatio):"--"},toUSD:function(t){return void 0===t||null===t?Tt(0):this.ethPrice.times(Tt(t))},toPeth:function(t){return Tt(t).eq(0)?Tt(0):Tt(t).div(this.wethToPethRatio)}}},It=Ft,Ut=(a("d302b"),Object(x["a"])(It,i,n,!1,null,"53955227",null));e["default"]=Ut.exports},"34bd":function(t,e,a){"use strict";var i=a("6f93"),n=a.n(i);n.a},"47e9":function(t,e,a){},"6f93":function(t,e,a){},"7c0e":function(t,e,a){"use strict";var i=a("148d"),n=a.n(i);n.a},"7d81":function(t,e,a){"use strict";var i=a("201e"),n=a.n(i);n.a},a316:function(t,e,a){"use strict";var i=a("bf59"),n=a.n(i);n.a},bf59:function(t,e,a){},c16c:function(t,e,a){"use strict";a.d(e,"e",(function(){return o})),a.d(e,"d",(function(){return c})),a.d(e,"c",(function(){return u})),a.d(e,"f",(function(){return l})),a.d(e,"h",(function(){return d})),a.d(e,"g",(function(){return h})),a.d(e,"a",(function(){return p})),a.d(e,"b",(function(){return m}));a("b680"),a("d3b7"),a("e25e"),a("25f0");var i=a("901e"),n=a.n(i),r=function(t){return new n.a(t)},s=function(t,e,a){return r(t).times(r(e)).div(r(a))};function o(t){return n.a.isBigNumber(t)||(t=new n.a(t)),t.times(100).toString()}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n.a.isBigNumber(t)||(t=new n.a(t)),!isFinite(t)||isNaN(t)?"--":a?t.toFixed(e,n.a.ROUND_DOWN).toString():t.toFixed(e).toString()}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=c(o(t),e,a);return isFinite(i)&&new n.a(i).gt(0)?i:"--"}function l(t,e,a,i){return s(r(t),r(e),r(a)).minus(r(i))}function d(t,e,a,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return r(t).minus(s(r(e).plus(.001),r(a),r(i))).minus(r(n).times(1))}function h(t,e,a,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return r(t).minus(s(r(e),r(a),r(i))).minus(r(n).times(1))}function p(t,e,a){return s(r(a),t,e)}function m(t,e,a,i){for(var n=parseInt(a),o=n;o>0;o--){var c=s(o,t,e).lte(r(i));if(c)return o}for(var u=100;u>0;u--){var l=s(u/100,t,e).lte(r(i));if(l)return u/100}return 0}},c6a8:function(t,e,a){},d07c:function(t,e,a){"use strict";var i=a("19e4"),n=a.n(i);n.a},d302b:function(t,e,a){"use strict";var i=a("c6a8"),n=a.n(i);n.a},df86:function(t,e,a){"use strict";var i=a("47e9"),n=a.n(i);n.a},ef42:function(t,e,a){"use strict";var i=a("0f98"),n=a.n(i);n.a}}]);
//# sourceMappingURL=chunk-73a9fad5.33941026.js.map